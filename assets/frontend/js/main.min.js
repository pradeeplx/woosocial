!function(o,a){var t={cache:function(){t.els={},t.vars={},t.els.$actions_list=o(".jck_woo_social-actions"),t.els.$tab_links=o(".jck_woo_social-tab-link"),t.els.$tab_content=o(".jck_woo_social-tab-content"),t.els.$load_more_button=o(".jck_woo_social-load-more")},on_ready:function(){t.cache(),t.setup_follow_actions(),t.setup_like_action(),t.setup_tabs(),t.setup_load_more()},setup_follow_actions:function(){o(".jck_woo_social-follow-action").on("click",function(){var a=o(this),c=a.attr("data-user-id"),s=a.attr("data-follow-type"),l="jck_woo_social-follow-action--loading";"login"===s||a.hasClass(l)||(a.addClass(l),o.ajax({type:"GET",url:jck_woo_social_vars.ajax_url,cache:!1,dataType:"jsonp",crossDomain:!0,data:{action:"jck_woo_social_follow_action",nonce:jck_woo_social_vars.nonce,user_id:c,type:s},success:function(c){a.text(c.button.text),a.attr("data-follow-type",c.button.type),a.removeClass(l),a.removeClass("jck_woo_social-follow-action--"+s),a.addClass("jck_woo_social-follow-action--"+c.button.type),c.add_follow_html&&t.els.$actions_list.prepend(c.add_follow_html),c.remove_follow_class&&o(c.remove_follow_class).remove()},error:function(o){}}))})},setup_like_action:function(){o(a).on("click",".jck-woo-social-like-action",function(){var a=o(this),t=a.closest(".jck-woo-social-likes"),c=a.attr("data-product-id"),s=a.attr("data-type"),l=a.find(".jck-woo-social-like-button__count"),e="jck_woo_social-follow-action--loading";return a.hasClass(e)||(a.addClass(e),o.ajax({type:"GET",url:jck_woo_social_vars.ajax_url,cache:!1,dataType:"jsonp",crossDomain:!0,data:{action:"jck_woo_social_like_action",nonce:jck_woo_social_vars.nonce,product_id:c,type:s},success:function(o){if(l.length>0){var c=parseInt(l.text()),i="like"===s?c+1:c-1;l.text(i),a.attr("data-type",o.button.type),a.removeClass(e),a.removeClass("jck_woo_social-like-action--"+s),a.addClass("jck_woo_social-like-action--"+o.button.type),o.add_like_html&&t.find(".jck-woo-social-likes__item--like-button").after(o.add_like_html),o.remove_like_class&&t.find(o.remove_like_class).remove()}},error:function(o){}})),!1})},setup_tabs:function(){t.els.$tab_links.on("click",function(){var a=o(this).attr("href"),c="jck_woo_social-tab-link--active";return t.els.$tab_links.removeClass(c),o(this).addClass(c),t.els.$tab_content.hide(),o(a).show(),!1})},setup_load_more:function(){t.els.$load_more_button.on("click",function(){o(this).hasClass("jck_woo_social-load-more--activity")&&t.load_more_activity(o(this))})},load_more_activity:function(a){var t=parseInt(a.attr("data-limit")),c=parseInt(a.attr("data-offset")),s=t+c,l=a.attr("data-user-id"),e=a.parent();o.ajax({type:"GET",url:jck_woo_social_vars.ajax_url,cache:!1,dataType:"jsonp",crossDomain:!0,data:{action:"jck_woo_social_activity_log_load_more",nonce:jck_woo_social_vars.nonce,limit:t,offset:c,user_id:l},success:function(o){o.activity_html?(e.before(o.activity_html),a.attr("data-offset",s)):e.remove()},error:function(o){}})}};o(a).ready(t.on_ready())}(jQuery,document);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiJCIsImRvY3VtZW50IiwiamNrX3dvb19zb2NpYWwiLCJjYWNoZSIsImVscyIsInZhcnMiLCIkYWN0aW9uc19saXN0IiwiJHRhYl9saW5rcyIsIiR0YWJfY29udGVudCIsIiRsb2FkX21vcmVfYnV0dG9uIiwib25fcmVhZHkiLCJzZXR1cF9mb2xsb3dfYWN0aW9ucyIsInNldHVwX2xpa2VfYWN0aW9uIiwic2V0dXBfdGFicyIsInNldHVwX2xvYWRfbW9yZSIsIm9uIiwiJGJ1dHRvbiIsInRoaXMiLCJ1c2VyX2lkIiwiYXR0ciIsInR5cGUiLCJsb2FkaW5nX2NsYXNzIiwiaGFzQ2xhc3MiLCJhZGRDbGFzcyIsImFqYXgiLCJ1cmwiLCJqY2tfd29vX3NvY2lhbF92YXJzIiwiYWpheF91cmwiLCJkYXRhVHlwZSIsImNyb3NzRG9tYWluIiwiZGF0YSIsImFjdGlvbiIsIm5vbmNlIiwic3VjY2VzcyIsInRleHQiLCJidXR0b24iLCJyZW1vdmVDbGFzcyIsImFkZF9mb2xsb3dfaHRtbCIsInByZXBlbmQiLCJyZW1vdmVfZm9sbG93X2NsYXNzIiwicmVtb3ZlIiwiZXJyb3IiLCIkY3VycmVudF9saWtlc19saXN0IiwiY2xvc2VzdCIsInByb2R1Y3RfaWQiLCIkY291bnQiLCJmaW5kIiwibGVuZ3RoIiwiY291bnQiLCJwYXJzZUludCIsIm5ld19jb3VudCIsImFkZF9saWtlX2h0bWwiLCJhZnRlciIsInJlbW92ZV9saWtlX2NsYXNzIiwidGFyZ2V0IiwiYWN0aXZlX2NsYXNzIiwiaGlkZSIsInNob3ciLCJsb2FkX21vcmVfYWN0aXZpdHkiLCJsaW1pdCIsIm9mZnNldCIsIm5leHRfb2Zmc2V0IiwiJGxvYWRfbW9yZV9pdGVtIiwicGFyZW50IiwiYWN0aXZpdHlfaHRtbCIsImJlZm9yZSIsInJlYWR5IiwialF1ZXJ5Il0sIm1hcHBpbmdzIjoiQ0FBQSxTQUFBQSxFQUFBQyxHQUVBLEdBQUFDLElBRUFDLE1BQUEsV0FDQUQsRUFBQUUs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QWYsRUFBQWlCLE1BQUFLLFNBQUEsdUNBQ0FwQixFQUFBd0QsbUJBQUExRCxFQUFBaUIsVUFNQXlDLG1CQUFBLFNBQUFqRCxHQUVBLEdBQUFrRCxHQUFBVixTQUFBeEMsRUFBQVUsS0FBQSxlQUNBeUMsRUFBQVgsU0FBQXhDLEVBQUFVLEtBQUEsZ0JBQ0EwQyxFQUFBRixFQUFBQyxFQUNBMUMsRUFBQVQsRUFBQVUsS0FBQSxnQkFDQTJDLEVBQUFyRCxFQUFBc0QsUUFFQS9ELEdBQUF3QixNQUNBSixLQUFBLE1BQ0FLLElBQUFDLG9CQUFBQyxTQUNBeEIsT0FBQSxFQUNBeUIsU0FBQSxRQUNBQyxhQUFBLEVBQ0FDLE1BQ0FDLE9BQUEsd0NBQ0FDLE1BQUFOLG9CQUFBTSxNQUNBMkIsTUFBQUEsRUFDQUMsT0FBQUEsRUFDQTFDLFFBQUFBLEdBR0FlLFFBQUEsU0FBQUgsR0FFQUEsRUFBQWtDLGVBRUFGLEVBQUFHLE9BQUFuQyxFQUFBa0MsZUFDQXZELEVBQUFVLEtBQUEsY0FBQTBDLElBSUFDLEVBQUF0QixVQU1BQyxNQUFBLFNBQUFYLFFBU0E5QixHQUFBQyxHQUFBaUUsTUFBQWhFLEVBQUFRLGFBRUF5RCxPQUFBbEUiLCJmaWxlIjoibWFpbi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oJCwgZG9jdW1lbnQpIHtcbiAgICBcbiAgICB2YXIgamNrX3dvb19zb2NpYWwgPSB7XG4gICAgICAgIFxuICAgICAgICBjYWNoZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBqY2tfd29vX3NvY2lhbC5lbHMgPSB7fTtcbiAgICAgICAgICAgIGpja193b29fc29jaWFsLnZhcnMgPSB7fTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgamNrX3dvb19zb2NpYWwuZWxzLiRhY3Rpb25zX2xpc3QgPSAkKCcuamNrX3dvb19zb2NpYWwtYWN0aW9ucycpO1xuICAgICAgICAgICAgamNrX3dvb19zb2NpYWwuZWxzLiR0YWJfbGlua3MgPSAkKCcuamNrX3dvb19zb2NpYWwtdGFiLWxpbmsnKTtcbiAgICAgICAgICAgIGpja193b29fc29jaWFsLmVscy4kdGFiX2NvbnRlbnQgPSAkKCcuamNrX3dvb19zb2NpYWwtdGFiLWNvbnRlbnQnKTtcbiAgICAgICAgICAgIGpja193b29fc29jaWFsLmVscy4kbG9hZF9tb3JlX2J1dHRvbiA9ICQoJy5qY2tfd29vX3NvY2lhbC1sb2FkLW1vcmUnKTtcbiAgICAgICAgICAgIFxuICAgICAgICB9LFxuIFxuICAgICAgICBvbl9yZWFkeTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGpja193b29fc29jaWFsLmNhY2hlKCk7XG4gICAgICAgICAgICBqY2tfd29vX3NvY2lhbC5zZXR1cF9mb2xsb3dfYWN0aW9ucygpO1xuICAgICAgICAgICAgamNrX3dvb19zb2NpYWwuc2V0dXBfbGlrZV9hY3Rpb24oKTtcbiAgICAgICAgICAgIGpja193b29fc29jaWFsLnNldHVwX3RhYnMoKTtcbiAgICAgICAgICAgIGpja193b29fc29jaWFsLnNldHVwX2xvYWRfbW9yZSgpO1xuICAgICAgICAgICAgXG4gICAgICAgIH0sXG4gICAgIFxuICAgICAgICBzZXR1cF9mb2xsb3dfYWN0aW9uczogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgICQoJy5qY2tfd29vX3NvY2lhbC1mb2xsb3ctYWN0aW9uJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB2YXIgJGJ1dHRvbiA9ICQodGhpcyksXG4gICAgICAgICAgICAgICAgICAgIHVzZXJfaWQgPSAkYnV0dG9uLmF0dHIoJ2RhdGEtdXNlci1pZCcpLFxuICAgICAgICAgICAgICAgICAgICB0eXBlID0gJGJ1dHRvbi5hdHRyKCdkYXRhLWZvbGxvdy10eXBlJyksXG4gICAgICAgICAgICAgICAgICAgIGxvYWRpbmdfY2xhc3MgPSAnamNrX3dvb19zb2NpYWwtZm9sbG93LWFjdGlvbi0tbG9hZGluZyc7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYoIHR5cGUgPT09IFwibG9naW5cIiApIHtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYoICEkYnV0dG9uLmhhc0NsYXNzKGxvYWRpbmdfY2xhc3MpICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAkYnV0dG9uLmFkZENsYXNzKGxvYWRpbmdfY2xhc3MpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICBcdFx0XHRcdHR5cGU6IFwiR0VUXCIsXG4gICAgICAgICAgICBcdFx0XHRcdHVybDogamNrX3dvb19zb2NpYWxfdmFycy5hamF4X3VybCxcbiAgICAgICAgICAgIFx0XHRcdFx0Y2FjaGU6IGZhbHNlLFxuICAgICAgICAgICAgXHRcdFx0XHRkYXRhVHlwZTogXCJqc29ucFwiLFx0XHRcdFx0XG4gICAgICAgICAgICBcdFx0XHRcdGNyb3NzRG9tYWluOiB0cnVlLFxuICAgICAgICAgICAgXHRcdFx0XHRkYXRhOiB7XG4gICAgICAgICAgICBcdFx0XHRcdFx0YWN0aW9uIDogJ2pja193b29fc29jaWFsX2ZvbGxvd19hY3Rpb24nLFxuICAgICAgICAgICAgXHRcdFx0XHRcdG5vbmNlIDogamNrX3dvb19zb2NpYWxfdmFycy5ub25jZSxcbiAgICAgICAgICAgIFx0XHRcdFx0XHR1c2VyX2lkIDogdXNlcl9pZCxcbiAgICAgICAgICAgIFx0XHRcdFx0XHR0eXBlIDogdHlwZVxuICAgICAgICAgICAgXHRcdFx0XHR9LFxuICAgICAgICAgICAgXHRcdFx0XHRcbiAgICAgICAgICAgIFx0XHRcdFx0c3VjY2VzczogZnVuY3Rpb24oIGRhdGEgKSB7XG4gICAgICAgICAgICBcdFx0XHRcdFx0XG4gICAgICAgICAgICBcdFx0XHRcdFx0JGJ1dHRvbi50ZXh0KGRhdGEuYnV0dG9uLnRleHQpO1xuICAgICAgICAgICAgXHRcdFx0XHRcdCRidXR0b24uYXR0cignZGF0YS1mb2xsb3ctdHlwZScsZGF0YS5idXR0b24udHlwZSk7XG4gICAgICAgICAgICBcdFx0XHRcdFx0XG4gICAgICAgICAgICBcdFx0XHRcdFx0JGJ1dHRvbi5yZW1vdmVDbGFzcyhsb2FkaW5nX2NsYXNzKTtcbiAgICAgICAgICAgIFx0XHRcdFx0XHQkYnV0dG9uLnJlbW92ZUNsYXNzKCdqY2tfd29vX3NvY2lhbC1mb2xsb3ctYWN0aW9uLS0nK3R5cGUpO1xuICAgICAgICAgICAgXHRcdFx0XHRcdCRidXR0b24uYWRkQ2xhc3MoJ2pja193b29fc29jaWFsLWZvbGxvdy1hY3Rpb24tLScrZGF0YS5idXR0b24udHlwZSk7XG4gICAgICAgICAgICBcdFx0XHRcdFx0XG4gICAgICAgICAgICBcdFx0XHRcdFx0aWYoZGF0YS5hZGRfZm9sbG93X2h0bWwpIHtcbiAgICAgICAgICAgICAgICBcdFx0XHRcdFx0amNrX3dvb19zb2NpYWwuZWxzLiRhY3Rpb25zX2xpc3QucHJlcGVuZChkYXRhLmFkZF9mb2xsb3dfaHRtbCk7XG4gICAgICAgICAgICBcdFx0XHRcdFx0fVxuICAgICAgICAgICAgXHRcdFx0XHRcdFxuICAgICAgICAgICAgXHRcdFx0XHRcdGlmKGRhdGEucmVtb3ZlX2ZvbGxvd19jbGFzcykge1xuICAgICAgICAgICAgICAgIFx0XHRcdFx0XHQkKGRhdGEucmVtb3ZlX2ZvbGxvd19jbGFzcykucmVtb3ZlKCk7XG4gICAgICAgICAgICBcdFx0XHRcdFx0fVxuICAgICAgICAgICAgXHRcdFx0XHR9LFxuICAgICAgICAgICAgXHRcdFx0XHRcbiAgICAgICAgICAgIFx0XHRcdFx0ZXJyb3I6IGZ1bmN0aW9uKCBkYXRhICkge1xuICAgICAgICAgICAgICAgIFx0XHRcdFx0XG4gICAgICAgICAgICBcdFx0XHRcdH1cbiAgICAgICAgICAgIFx0XHRcdH0pO1xuICAgICAgICBcdFx0XHRcbiAgICAgICAgXHRcdFx0fVxuICAgIFx0XHRcdFxuICAgIFx0XHRcdH1cblx0XHRcdFxuXHRcdFx0fSk7XG4gICAgICAgICAgICBcbiAgICAgICAgfSxcbiAgICAgICAgXG4gICAgICAgIHNldHVwX2xpa2VfYWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5qY2std29vLXNvY2lhbC1saWtlLWFjdGlvbicsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdmFyICRidXR0b24gPSAkKHRoaXMpLFxuICAgICAgICAgICAgICAgICAgICAkY3VycmVudF9saWtlc19saXN0ID0gJGJ1dHRvbi5jbG9zZXN0KCcuamNrLXdvby1zb2NpYWwtbGlrZXMnKSxcbiAgICAgICAgICAgICAgICAgICAgcHJvZHVjdF9pZCA9ICRidXR0b24uYXR0cignZGF0YS1wcm9kdWN0LWlkJyksXG4gICAgICAgICAgICAgICAgICAgIHR5cGUgPSAkYnV0dG9uLmF0dHIoJ2RhdGEtdHlwZScpLFxuICAgICAgICAgICAgICAgICAgICAkY291bnQgPSAkYnV0dG9uLmZpbmQoJy5qY2std29vLXNvY2lhbC1saWtlLWJ1dHRvbl9fY291bnQnKSxcbiAgICAgICAgICAgICAgICAgICAgbG9hZGluZ19jbGFzcyA9ICdqY2tfd29vX3NvY2lhbC1mb2xsb3ctYWN0aW9uLS1sb2FkaW5nJztcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYoICEkYnV0dG9uLmhhc0NsYXNzKGxvYWRpbmdfY2xhc3MpICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICRidXR0b24uYWRkQ2xhc3MobG9hZGluZ19jbGFzcyk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICBcdFx0XHRcdHR5cGU6IFwiR0VUXCIsXG4gICAgICAgIFx0XHRcdFx0dXJsOiBqY2tfd29vX3NvY2lhbF92YXJzLmFqYXhfdXJsLFxuICAgICAgICBcdFx0XHRcdGNhY2hlOiBmYWxzZSxcbiAgICAgICAgXHRcdFx0XHRkYXRhVHlwZTogXCJqc29ucFwiLFx0XHRcdFx0XG4gICAgICAgIFx0XHRcdFx0Y3Jvc3NEb21haW46IHRydWUsXG4gICAgICAgIFx0XHRcdFx0ZGF0YToge1xuICAgICAgICBcdFx0XHRcdFx0YWN0aW9uIDogJ2pja193b29fc29jaWFsX2xpa2VfYWN0aW9uJyxcbiAgICAgICAgXHRcdFx0XHRcdG5vbmNlIDogamNrX3dvb19zb2NpYWxfdmFycy5ub25jZSxcbiAgICAgICAgXHRcdFx0XHRcdHByb2R1Y3RfaWQgOiBwcm9kdWN0X2lkLFxuICAgICAgICBcdFx0XHRcdFx0dHlwZSA6IHR5cGVcbiAgICAgICAgXHRcdFx0XHR9LFxuICAgICAgICBcdFx0XHRcdFxuICAgICAgICBcdFx0XHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uKCBkYXRhICkge1xuICAgICAgICBcdFx0XHRcdFx0XG4gICAgICAgIFx0XHRcdFx0XHRpZiggJGNvdW50Lmxlbmd0aCA+IDAgKSB7XG4gICAgICAgICAgICBcdFx0XHRcdFx0XG4gICAgICAgICAgICBcdFx0XHRcdFx0dmFyIGNvdW50ID0gcGFyc2VJbnQoJGNvdW50LnRleHQoKSksXG4gICAgICAgICAgICBcdFx0XHRcdFx0ICAgIG5ld19jb3VudCA9IHR5cGUgPT09IFwibGlrZVwiID8gY291bnQrMSA6IGNvdW50LTE7XG4gICAgICAgICAgICBcdFx0XHRcdFx0XG4gICAgICAgICAgICBcdFx0XHRcdFx0JGNvdW50LnRleHQoIG5ld19jb3VudCApOyBcbiAgICAgICAgICAgIFx0XHRcdFx0XHQkYnV0dG9uLmF0dHIoJ2RhdGEtdHlwZScsIGRhdGEuYnV0dG9uLnR5cGUpO1xuICAgICAgICAgICAgXHRcdFx0XHRcdFxuICAgICAgICAgICAgXHRcdFx0XHRcdCRidXR0b24ucmVtb3ZlQ2xhc3MobG9hZGluZ19jbGFzcyk7XG4gICAgICAgICAgICBcdFx0XHRcdFx0JGJ1dHRvbi5yZW1vdmVDbGFzcygnamNrX3dvb19zb2NpYWwtbGlrZS1hY3Rpb24tLScrdHlwZSk7XG4gICAgICAgICAgICBcdFx0XHRcdFx0JGJ1dHRvbi5hZGRDbGFzcygnamNrX3dvb19zb2NpYWwtbGlrZS1hY3Rpb24tLScrZGF0YS5idXR0b24udHlwZSk7XG4gICAgICAgICAgICBcdFx0XHRcdFx0XG4gICAgICAgICAgICBcdFx0XHRcdFx0aWYoZGF0YS5hZGRfbGlrZV9odG1sKSB7XG4gICAgICAgICAgICAgICAgXHRcdFx0XHRcdCRjdXJyZW50X2xpa2VzX2xpc3QuZmluZCgnLmpjay13b28tc29jaWFsLWxpa2VzX19pdGVtLS1saWtlLWJ1dHRvbicpLmFmdGVyKGRhdGEuYWRkX2xpa2VfaHRtbCk7XG4gICAgICAgICAgICBcdFx0XHRcdFx0fVxuICAgICAgICAgICAgXHRcdFx0XHRcdFxuICAgICAgICAgICAgXHRcdFx0XHRcdGlmKGRhdGEucmVtb3ZlX2xpa2VfY2xhc3MpIHtcbiAgICAgICAgICAgICAgICBcdFx0XHRcdFx0JGN1cnJlbnRfbGlrZXNfbGlzdC5maW5kKGRhdGEucmVtb3ZlX2xpa2VfY2xhc3MpLnJlbW92ZSgpO1xuICAgICAgICAgICAgXHRcdFx0XHRcdH0gICAgIFx0XHRcdFx0XHRcbiAgICAgICAgICAgIFx0XHRcdFx0XHRcbiAgICAgICAgXHRcdFx0XHRcdH1cbiAgICAgICAgXHRcdFx0XHR9LFxuICAgICAgICBcdFx0XHRcdFxuICAgICAgICBcdFx0XHRcdGVycm9yOiBmdW5jdGlvbiggZGF0YSApIHtcbiAgICAgICAgICAgIFx0XHRcdFx0XG4gICAgICAgIFx0XHRcdFx0fVxuICAgICAgICBcdFx0XHR9KTtcbiAgICAgICAgXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgIH0sXG4gICAgICAgIFxuICAgICAgICBzZXR1cF90YWJzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgamNrX3dvb19zb2NpYWwuZWxzLiR0YWJfbGlua3Mub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gJCh0aGlzKS5hdHRyKCdocmVmJyksXG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZV9jbGFzcyA9ICdqY2tfd29vX3NvY2lhbC10YWItbGluay0tYWN0aXZlJztcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBqY2tfd29vX3NvY2lhbC5lbHMuJHRhYl9saW5rcy5yZW1vdmVDbGFzcyhhY3RpdmVfY2xhc3MpO1xuICAgICAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoYWN0aXZlX2NsYXNzKTtcbiAgICAgICAgICAgICAgICBqY2tfd29vX3NvY2lhbC5lbHMuJHRhYl9jb250ZW50LmhpZGUoKTtcbiAgICAgICAgICAgICAgICAkKHRhcmdldCkuc2hvdygpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgIH0sXG4gICAgICAgIFxuICAgICAgICBzZXR1cF9sb2FkX21vcmU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBqY2tfd29vX3NvY2lhbC5lbHMuJGxvYWRfbW9yZV9idXR0b24ub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmKCAkKHRoaXMpLmhhc0NsYXNzKCdqY2tfd29vX3NvY2lhbC1sb2FkLW1vcmUtLWFjdGl2aXR5JykgKVxuICAgICAgICAgICAgICAgICAgICBqY2tfd29vX3NvY2lhbC5sb2FkX21vcmVfYWN0aXZpdHkoICQodGhpcykgKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgIH0sXG4gICAgICAgIFxuICAgICAgICBsb2FkX21vcmVfYWN0aXZpdHk6IGZ1bmN0aW9uKCAkbG9hZF9tb3JlX2J1dHRvbiApIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdmFyIGxpbWl0ID0gcGFyc2VJbnQoICRsb2FkX21vcmVfYnV0dG9uLmF0dHIoJ2RhdGEtbGltaXQnKSApLFxuICAgICAgICAgICAgICAgIG9mZnNldCA9IHBhcnNlSW50KCAkbG9hZF9tb3JlX2J1dHRvbi5hdHRyKCdkYXRhLW9mZnNldCcpICksXG4gICAgICAgICAgICAgICAgbmV4dF9vZmZzZXQgPSBsaW1pdCtvZmZzZXQsXG4gICAgICAgICAgICAgICAgdXNlcl9pZCA9ICRsb2FkX21vcmVfYnV0dG9uLmF0dHIoJ2RhdGEtdXNlci1pZCcpLFxuICAgICAgICAgICAgICAgICRsb2FkX21vcmVfaXRlbSA9ICRsb2FkX21vcmVfYnV0dG9uLnBhcmVudCgpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgJC5hamF4KHtcblx0XHRcdFx0dHlwZTogXCJHRVRcIixcblx0XHRcdFx0dXJsOiBqY2tfd29vX3NvY2lhbF92YXJzLmFqYXhfdXJsLFxuXHRcdFx0XHRjYWNoZTogZmFsc2UsXG5cdFx0XHRcdGRhdGFUeXBlOiBcImpzb25wXCIsXHRcdFx0XHRcblx0XHRcdFx0Y3Jvc3NEb21haW46IHRydWUsXG5cdFx0XHRcdGRhdGE6IHtcblx0XHRcdFx0XHRhY3Rpb24gOiAnamNrX3dvb19zb2NpYWxfYWN0aXZpdHlfbG9nX2xvYWRfbW9yZScsXG5cdFx0XHRcdFx0bm9uY2UgOiBqY2tfd29vX3NvY2lhbF92YXJzLm5vbmNlLFxuXHRcdFx0XHRcdGxpbWl0IDogbGltaXQsXG5cdFx0XHRcdFx0b2Zmc2V0IDogb2Zmc2V0LFxuXHRcdFx0XHRcdHVzZXJfaWQgOiB1c2VyX2lkXG5cdFx0XHRcdH0sXG5cdFx0XHRcdFxuXHRcdFx0XHRzdWNjZXNzOiBmdW5jdGlvbiggZGF0YSApIHtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHRpZiggZGF0YS5hY3Rpdml0eV9odG1sICkge1xuICAgIFx0XHRcdFx0XHRcbiAgICBcdFx0XHRcdFx0JGxvYWRfbW9yZV9pdGVtLmJlZm9yZSggZGF0YS5hY3Rpdml0eV9odG1sICk7XG4gICAgXHRcdFx0XHRcdCRsb2FkX21vcmVfYnV0dG9uLmF0dHIoJ2RhdGEtb2Zmc2V0JywgbmV4dF9vZmZzZXQpIDtcbiAgICBcdFx0XHRcdFx0XG5cdFx0XHRcdFx0fSBlbHNlIHtcbiAgICBcdFx0XHRcdFx0XG4gICAgXHRcdFx0XHRcdCRsb2FkX21vcmVfaXRlbS5yZW1vdmUoKTtcbiAgICBcdFx0XHRcdFx0XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFxuXHRcdFx0XHR9LFxuXHRcdFx0XHRcblx0XHRcdFx0ZXJyb3I6IGZ1bmN0aW9uKCBkYXRhICkge1xuICAgIFx0XHRcdFx0XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgXG4gICAgfTtcbiAgICBcblx0JChkb2N1bWVudCkucmVhZHkoIGpja193b29fc29jaWFsLm9uX3JlYWR5KCkgKTtcblxufShqUXVlcnksIGRvY3VtZW50KSk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9