!function(o,a){var t={cache:function(){t.els={},t.vars={},t.els.document_body=o(a.body),t.els.actions_list=o(".jck-woosocial-actions"),t.els.tab_links=o(".jck-woosocial-profile-link"),t.els.tab_content=o(".jck-woosocial-tab-content"),t.els.load_more_button=o(".jck-woosocial-load-more"),t.els.action_blocks=o(".jck-woosocial-action"),t.els.likes_container=o(".jck-woosocial-user-likes"),t.els.add_to_cart_buttons=o(".jck-woosocial-add-to-cart-wrapper .add_to_cart_button"),t.els.tick_icon=o('<i class="jck-woosocial-ic-tick"></i>'),t.els.loading_icon=o('<i class="jck-woosocial-ic-loading jck-woosocial-spin"></i>'),t.els.card_grids=o(".jck-woosocial-card-grid"),t.els.card_grid_cards=t.els.card_grids.find(".jck-woosocial-card"),t.vars.action_offset=1,t.vars.is_hidden_class="jck-woosocial--is-hidden",t.vars.animate_spin_class="jck-woosocial-spin",t.vars.add_to_cart_buttons_class=".jck-woosocial-add-to-cart-wrapper .add_to_cart_button",t.vars.card_grid_cards_class=".jck-woosocial-card-grid .jck-woosocial-card",t.vars.card_hover_class="jck-woosocial-card--hover"},on_ready:function(){t.cache(),t.setup_follow_actions(),t.setup_like_action(),t.setup_tabs(),t.setup_load_more(),t.setup_activity_log(),t.add_to_cart(),t.setup_cards()},on_scroll:function(){t.scroll_activity_log()},setup_follow_actions:function(){o(".jck-woosocial-follow-action").on("click",function(){var a=o(this),s=a.attr("data-user-id"),c=a.attr("data-type"),i="jck-woosocial-follow-action--loading";"login"===c||a.hasClass(i)||(a.addClass(i),o.ajax({type:"GET",url:jck_woosocial_vars.ajax_url,cache:!1,dataType:"jsonp",crossDomain:!0,data:{action:"jck_woosocial_follow_action",nonce:jck_woosocial_vars.nonce,user_id:s,type:c},success:function(s){a.text(s.button.text),a.attr("data-type",s.button.type),a.removeClass(i),a.removeClass("jck-woosocial-follow-action--"+c),a.addClass("jck-woosocial-follow-action--"+s.button.type),s.add_follow_html&&t.els.actions_list.prepend(s.add_follow_html),s.remove_follow_class&&o(s.remove_follow_class).remove()},error:function(o){}}))})},setup_like_action:function(){o(a).on("click",".jck-woosocial-like-action",function(){var a=o(this),t=a.closest(".jck-woosocial-likes"),s=a.attr("data-product-id"),c=a.attr("data-type"),i=a.find(".jck-woosocial-like-button__count"),n="jck-woosocial-follow-action--loading";return a.hasClass(n)||(a.addClass(n),o.ajax({type:"GET",url:jck_woosocial_vars.ajax_url,cache:!1,dataType:"jsonp",crossDomain:!0,data:{action:"jck_woosocial_like_action",nonce:jck_woosocial_vars.nonce,product_id:s,type:c},success:function(o){if(i.length>0){var s=parseInt(i.text()),e="like"===c?s+1:s-1;i.text(e),a.attr("data-type",o.button.type),a.removeClass(n),a.removeClass("jck-woosocial-like-action--"+c),a.addClass("jck-woosocial-like-action--"+o.button.type),o.add_like_html&&t.find(".jck-woosocial-likes__item--like-button").after(o.add_like_html),o.remove_like_class&&t.find(o.remove_like_class).remove()}},error:function(o){}})),!1})},setup_tabs:function(){t.els.tab_links.on("click",function(){var a=o(this).attr("href"),s="jck-woosocial-profile-link--active";return t.els.tab_links.removeClass(s),o(this).addClass(s),t.els.tab_content.hide(),o(a).show(),eqjs.refreshNodes(),eqjs.query(),!1})},spin_icon_start:function(o){o.addClass(t.vars.animate_spin_class)},spin_icon_stop:function(o){o.removeClass(t.vars.animate_spin_class)},disable_load_more_button:function(o){o.html(jck_woosocial_vars.strings.no_more).removeAttr("href").addClass("jck-woosocial-load-more--disabled")},setup_load_more:function(){t.els.load_more_button.on("click",function(){var a=o(this),s=a.find("i");return a.hasClass("jck-woosocial-load-more--disabled")?!1:(t.spin_icon_start(s),o(this).hasClass("jck-woosocial-load-more--activity")&&t.load_more_activity(o(this),function(){t.spin_icon_stop(s)}),void(o(this).hasClass("jck-woosocial-load-more--likes")&&t.load_more_likes(o(this),function(){t.spin_icon_stop(s)})))})},load_more_activity:function(a,s){var c=parseInt(a.attr("data-limit")),i=parseInt(a.attr("data-offset")),n=c+i,e=a.attr("data-user-id"),l=a.attr("data-profile-user-id"),r=a.closest("li");o.ajax({type:"GET",url:jck_woosocial_vars.ajax_url,cache:!1,dataType:"jsonp",crossDomain:!0,data:{action:"jck_woosocial_load_more_activity",nonce:jck_woosocial_vars.nonce,limit:c,offset:i,user_id:e,profile_user_id:l},success:function(o){o.activity_html?(r.before(o.activity_html),a.attr("data-offset",n)):t.disable_load_more_button(a),void 0!==s&&s(o)},error:function(o){}})},load_more_likes:function(a,s){var c=parseInt(a.attr("data-limit")),i=parseInt(a.attr("data-offset")),n=c+i,e=a.attr("data-user-id");o.ajax({type:"GET",url:jck_woosocial_vars.ajax_url,cache:!1,dataType:"jsonp",crossDomain:!0,data:{action:"jck_woosocial_load_more_likes",nonce:jck_woosocial_vars.nonce,limit:c,offset:i,user_id:e},success:function(o){o.likes_html?(t.els.likes_container.append(o.likes_html),a.attr("data-offset",n)):t.disable_load_more_button(a),void 0!==s&&s(o)},error:function(o){}})},setup_activity_log:function(){t.hide_actions(t.els.action_blocks,t.vars.action_offset)},hide_actions:function(a,s){a.each(function(){o(this).offset().top>o(window).scrollTop()+o(window).height()*s&&o(this).find(".jck-woosocial-action__icon, .jck-woosocial-action__wrapper").css({opacity:0}).addClass(t.vars.is_hidden_class)})},show_actions:function(a,s){a.each(function(){o(this).offset().top<=o(window).scrollTop()+o(window).height()*s&&o(this).find(".jck-woosocial-action__icon").hasClass(t.vars.is_hidden_class)&&o(this).find(".jck-woosocial-action__icon, .jck-woosocial-action__wrapper").removeClass(t.vars.is_hidden_class).animate({opacity:1})})},scroll_activity_log:function(){window.requestAnimationFrame?window.requestAnimationFrame(function(){t.show_actions(t.els.action_blocks,t.vars.action_offset)}):setTimeout(function(){t.show_actions(t.els.action_blocks,t.vars.action_offset)},100)},add_to_cart:function(){t.els.document_body.on("click",t.vars.add_to_cart_buttons_class,function(){var a=o(this),s=a.text();a.attr("data-button-text",s).append(t.els.loading_icon)}),t.els.document_body.on("added_to_cart",function(o,a,s,c){var i=c.closest(".jck-woosocial-add-to-cart-wrapper"),n=c.attr("data-button-text");i.length>0&&(c.html(n).append(t.els.tick_icon),setTimeout(function(){c.html(n)},2e3))})},setup_cards:function(){t.els.document_body.hoverIntent(function(){var a=o(this);a.addClass(t.vars.card_hover_class)},function(){var a=o(this);a.removeClass(t.vars.card_hover_class)},t.vars.card_grid_cards_class)}};o(a).ready(t.on_ready()),o(window).on("scroll",function(){t.on_scroll()})}(jQuery,document);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiJCIsImRvY3VtZW50IiwiamNrX3dvb3NvY2lhbCIsImNhY2hlIiwiZWxzIiwidmFycyIsImRvY3VtZW50X2JvZHkiLCJib2R5IiwiYWN0aW9uc19saXN0IiwidGFiX2xpbmtzIiwidGFiX2NvbnRlbnQiLCJsb2FkX21vcmVfYnV0dG9uIiwiYWN0aW9uX2Jsb2NrcyIsImxpa2VzX2NvbnRhaW5lciIsImFkZF90b19jYXJ0X2J1dHRvbnMiLCJ0aWNrX2ljb24iLCJsb2FkaW5nX2ljb24iLCJjYXJkX2dyaWRzIiwiY2FyZF9ncmlkX2NhcmRzIiwiZmluZCIsImFjdGlvbl9vZmZzZXQiLCJpc19oaWRkZW5fY2xhc3MiLCJhbmltYXRlX3NwaW5fY2xhc3MiLCJhZGRfdG9fY2FydF9idXR0b25zX2NsYXNzIiwiY2FyZF9ncmlkX2NhcmRzX2NsYXNzIiwiY2FyZF9ob3Zlcl9jbGFzcyIsIm9uX3JlYWR5Iiwic2V0dXBfZm9sbG93X2FjdGlvbnMiLCJzZXR1cF9saWtlX2FjdGlvbiIsInNldHVwX3RhYnMiLCJzZXR1cF9sb2FkX21vcmUiLCJzZXR1cF9hY3Rpdml0eV9sb2ciLCJhZGRfdG9fY2FydCIsInNldHVwX2NhcmRzIiwib25fc2Nyb2xsIiwic2Nyb2xsX2FjdGl2aXR5X2xvZyIsIm9uIiwiJGJ1dHRvbiIsInRoaXMiLCJ1c2VyX2lkIiwiYXR0ciIsInR5cGUiLCJsb2FkaW5nX2NsYXNzIiwiaGFzQ2xhc3MiLCJhZGRDbGFzcyIsImFqYXgiLCJ1cmwiLCJqY2tfd29vc29jaWFsX3ZhcnMiLCJhamF4X3VybCIsImRhdGFUeXBlIiwiY3Jvc3NEb21haW4iLCJkYXRhIiwiYWN0aW9uIiwibm9uY2UiLCJzdWNjZXNzIiwidGV4dCIsImJ1dHRvbiIsInJlbW92ZUNsYXNzIiwiYWRkX2ZvbGxvd19odG1sIiwicHJlcGVuZCIsInJlbW92ZV9mb2xsb3dfY2xhc3MiLCJyZW1vdmUiLCJlcnJvciIsIiRjdXJyZW50X2xpa2VzX2xpc3QiLCJjbG9zZXN0IiwicHJvZHVjdF9pZCIsIiRjb3VudCIsImxlbmd0aCIsImNvdW50IiwicGFyc2VJbnQiLCJuZXdfY291bnQiLCJhZGRfbGlrZV9odG1sIiwiYWZ0ZXIiLCJyZW1vdmVfbGlrZV9jbGFzcyIsInRhcmdldCIsImFjdGl2ZV9jbGFzcyIsImhpZGUiLCJzaG93IiwiZXFqcyIsInJlZnJlc2hOb2RlcyIsInF1ZXJ5Iiwic3Bpbl9pY29uX3N0YXJ0IiwiJGljb24iLCJzcGluX2ljb25fc3RvcCIsImRpc2FibGVfbG9hZF9tb3JlX2J1dHRvbiIsImh0bWwiLCJzdHJpbmdzIiwibm9fbW9yZSIsInJlbW92ZUF0dHIiLCIkbG9hZF9tb3JlX2J1dHRvbiIsIiRsb2FkX21vcmVfaWNvbiIsImxvYWRfbW9yZV9hY3Rpdml0eSIsImxvYWRfbW9yZV9saWtlcyIsImNhbGxiYWNrIiwibGltaXQiLCJvZmZzZXQiLCJuZXh0X29mZnNldCIsInByb2ZpbGVfdXNlcl9pZCIsIiRsb2FkX21vcmVfaXRlbSIsImFjdGl2aXR5X2h0bWwiLCJiZWZvcmUiLCJ1bmRlZmluZWQiLCJsaWtlc19odG1sIiwiYXBwZW5kIiwiaGlkZV9hY3Rpb25zIiwiJGFjdGlvbl9ibG9ja3MiLCJlYWNoIiwidG9wIiwid2luZG93Iiwic2Nyb2xsVG9wIiwiaGVpZ2h0IiwiY3NzIiwib3BhY2l0eSIsInNob3dfYWN0aW9ucyIsImFuaW1hdGUiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJzZXRUaW1lb3V0IiwiYnV0dG9uX3RleHQiLCJlIiwiZnJhZ21lbnRzIiwiY2FydF9oYXNoIiwiJHdvb3NvY2lhbF9idXR0b25fd3JhcHBlciIsImhvdmVySW50ZW50IiwiJGNhcmQiLCJyZWFkeSIsImpRdWVyeSJdLCJtYXBwaW5ncyI6IkNBQUEsU0FBQUEsRUFBQUMsR0FFQSxHQUFBQyxJQUVBQyxNQUFBLFdBQ0FELEVBQUFFLE9BQ0FGLEVBQUFHLFFBRUFILEVBQUFFLElBQUFFLGNBQUFOLEVBQUFDLEVBQUFNLE1BQ0FMLEVBQUFFLElBQUFJLGFBQUFSLEVBQUEsMEJBQ0FFLEVBQUFFLElBQUFLLFVBQUFULEVBQUEsK0JBQ0FFLEVBQUFFLElBQUFNLFlBQUFWLEVBQUEsOEJBQ0FFLEVBQUFFLElBQUFPLGlCQUFBWCxFQUFBLDRCQUNBRSxFQUFBRSxJQUFBUSxjQUFBWixFQUFBLHlCQUNBRSxFQUFBRSxJQUFBUyxnQkFBQWIsRUFBQSw2QkFDQUUsRUFBQUUsSUFBQVUsb0JBQUFkLEVBQUEsMERBQ0FFLEVBQUFFLElBQUFXLFVBQUFmLEVBQUEseUNBQ0FFLEVBQUFFLElBQUFZLGFBQUFoQixFQUFBLCtEQUNBRSxFQUFBRSxJQUFBYSxXQUFBakIsRUFBQSw0QkFDQUUsRUFBQUUsSUFBQWMsZ0JBQUFoQixFQUFBRSxJQUFBYSxXQUFBRSxLQUFBLHVCQUdBakIsRUFBQUcsS0FBQWUsY0FBQSxFQUNBbEIsRUFBQUcsS0FBQWdCLGdCQUFBLDJCQUNBbkIsRUFBQUcsS0FBQWlCLG1CQUFBLHFCQUNBcEIsRUFBQUcsS0FBQWtCLDBCQUFBLHlEQUNBckIsRUFBQUcsS0FBQW1CLHNCQUFBLCtDQUNBdEIsRUFBQUcsS0FBQW9CLGlCQUFBLDZCQUlBQyxTQUFBLFdBRUF4QixFQUFBQyxRQUNBRCxFQUFBeUIsdUJBQ0F6QixFQUFBMEIsb0JBQ0ExQixFQUFBMkIsYUFDQTNCLEVBQUE0QixrQkFDQTVCLEVBQUE2QixxQkFDQTdCLEVBQUE4QixjQUNBOUIsRUFBQStCLGVBSUFDLFVBQUEsV0FFQWhDLEVBQUFpQyx1QkFJQVIscUJBQUEsV0FFQTNCLEVBQUEsZ0NBQUFvQyxHQUFBLFFBQUEsV0FFQSxHQUFBQyxHQUFBckMsRUFBQXNDLE1BQ0FDLEVBQUFGLEVBQUFHLEtBQUEsZ0JBQ0FDLEVBQUFKLEVBQUFHLEtBQUEsYUFDQUUsRUFBQSxzQ0FFQSxXQUFBRCxHQUlBSixFQUFBTSxTQUFBRCxLQUVBTCxFQUFBTyxTQUFBRixHQUVBMUMsRUFBQTZDLE1BQ0FKLEtBQUEsTUFDQUssSUFBQUMsbUJBQUFDLFNBQ0E3QyxPQUFBLEVBQ0E4QyxTQUFBLFFBQ0FDLGFBQUEsRUFDQUMsTUFDQUMsT0FBQSw4QkFDQUMsTUFBQU4sbUJBQUFNLE1BQ0FkLFFBQUFBLEVBQ0FFLEtBQUFBLEdBR0FhLFFBQUEsU0FBQUgsR0FFQWQsRUFBQWtCLEtBQUFKLEVBQUFLLE9BQUFELE1BQ0FsQixFQUFBRyxLQUFBLFlBQUFXLEVBQUFLLE9BQUFmLE1BRUFKLEVBQUFvQixZQUFBZixHQUNBTCxFQUFBb0IsWUFBQSxnQ0FBQWhCLEdBQ0FKLEVBQUFPLFNBQUEsZ0NBQUFPLEVBQUFLLE9BQUFmLE1BRUFVLEVBQUFPLGlCQUNBeEQsRUFBQUUsSUFBQUksYUFBQW1ELFFBQUFSLEVBQUFPLGlCQUdBUCxFQUFBUyxxQkFDQTVELEVBQUFtRCxFQUFBUyxxQkFBQUMsVUFJQUMsTUFBQSxTQUFBWCxXQWFBdkIsa0JBQUEsV0FFQTVCLEVBQUFDLEdBQUFtQyxHQUFBLFFBQUEsNkJBQUEsV0FFQSxHQUFBQyxHQUFBckMsRUFBQXNDLE1BQ0F5QixFQUFBMUIsRUFBQTJCLFFBQUEsd0JBQ0FDLEVBQUE1QixFQUFBRyxLQUFBLG1CQUNBQyxFQUFBSixFQUFBRyxLQUFBLGFBQ0EwQixFQUFBN0IsRUFBQWxCLEtBQUEscUNBQ0F1QixFQUFBLHNDQW1EQSxPQWpEQUwsR0FBQU0sU0FBQUQsS0FFQUwsRUFBQU8sU0FBQUYsR0FFQTFDLEVBQUE2QyxNQUNBSixLQUFBLE1BQ0FLLElBQUFDLG1CQUFBQyxTQUNBN0MsT0FBQSxFQUNBOEMsU0FBQSxRQUNBQyxhQUFBLEVBQ0FDLE1BQ0FDLE9BQUEsNEJBQ0FDLE1BQUFOLG1CQUFBTSxNQUNBWSxXQUFBQSxFQUNBeEIsS0FBQUEsR0FHQWEsUUFBQSxTQUFBSCxHQUVBLEdBQUFlLEVBQUFDLE9BQUEsRUFBQSxDQUVBLEdBQUFDLEdBQUFDLFNBQUFILEVBQUFYLFFBQ0FlLEVBQUEsU0FBQTdCLEVBQUEyQixFQUFBLEVBQUFBLEVBQUEsQ0FFQUYsR0FBQVgsS0FBQWUsR0FDQWpDLEVBQUFHLEtBQUEsWUFBQVcsRUFBQUssT0FBQWYsTUFFQUosRUFBQW9CLFlBQUFmLEdBQ0FMLEVBQUFvQixZQUFBLDhCQUFBaEIsR0FDQUosRUFBQU8sU0FBQSw4QkFBQU8sRUFBQUssT0FBQWYsTUFFQVUsRUFBQW9CLGVBQ0FSLEVBQUE1QyxLQUFBLDJDQUFBcUQsTUFBQXJCLEVBQUFvQixlQUdBcEIsRUFBQXNCLG1CQUNBVixFQUFBNUMsS0FBQWdDLEVBQUFzQixtQkFBQVosV0FNQUMsTUFBQSxTQUFBWCxTQU9BLEtBTUF0QixXQUFBLFdBRUEzQixFQUFBRSxJQUFBSyxVQUFBMkIsR0FBQSxRQUFBLFdBRUEsR0FBQXNDLEdBQUExRSxFQUFBc0MsTUFBQUUsS0FBQSxRQUNBbUMsRUFBQSxvQ0FVQSxPQVJBekUsR0FBQUUsSUFBQUssVUFBQWdELFlBQUFrQixHQUNBM0UsRUFBQXNDLE1BQUFNLFNBQUErQixHQUNBekUsRUFBQUUsSUFBQU0sWUFBQWtFLE9BQ0E1RSxFQUFBMEUsR0FBQUcsT0FFQUMsS0FBQUMsZUFDQUQsS0FBQUUsU0FFQSxLQU1BQyxnQkFBQSxTQUFBQyxHQUVBQSxFQUFBdEMsU0FBQTFDLEVBQUFHLEtBQUFpQixxQkFJQTZELGVBQUEsU0FBQUQsR0FFQUEsRUFBQXpCLFlBQUF2RCxFQUFBRyxLQUFBaUIscUJBSUE4RCx5QkFBQSxTQUFBL0MsR0FFQUEsRUFDQWdELEtBQUF0QyxtQkFBQXVDLFFBQUFDLFNBQ0FDLFdBQUEsUUFDQTVDLFNBQUEsc0NBSUFkLGdCQUFBLFdBRUE1QixFQUFBRSxJQUFBTyxpQkFBQXlCLEdBQUEsUUFBQSxXQUVBLEdBQUFxRCxHQUFBekYsRUFBQXNDLE1BQ0FvRCxFQUFBRCxFQUFBdEUsS0FBQSxJQUVBLE9BQUFzRSxHQUFBOUMsU0FBQSxzQ0FDQSxHQUdBekMsRUFBQStFLGdCQUFBUyxHQUVBMUYsRUFBQXNDLE1BQUFLLFNBQUEsc0NBRUF6QyxFQUFBeUYsbUJBQUEzRixFQUFBc0MsTUFBQSxXQUVBcEMsRUFBQWlGLGVBQUFPLFVBTUExRixFQUFBc0MsTUFBQUssU0FBQSxtQ0FFQXpDLEVBQUEwRixnQkFBQTVGLEVBQUFzQyxNQUFBLFdBRUFwQyxFQUFBaUYsZUFBQU8sVUFVQUMsbUJBQUEsU0FBQUYsRUFBQUksR0FFQSxHQUFBQyxHQUFBekIsU0FBQW9CLEVBQUFqRCxLQUFBLGVBQ0F1RCxFQUFBMUIsU0FBQW9CLEVBQUFqRCxLQUFBLGdCQUNBd0QsRUFBQUYsRUFBQUMsRUFDQXhELEVBQUFrRCxFQUFBakQsS0FBQSxnQkFDQXlELEVBQUFSLEVBQUFqRCxLQUFBLHdCQUNBMEQsRUFBQVQsRUFBQXpCLFFBQUEsS0FFQWhFLEdBQUE2QyxNQUNBSixLQUFBLE1BQ0FLLElBQUFDLG1CQUFBQyxTQUNBN0MsT0FBQSxFQUNBOEMsU0FBQSxRQUNBQyxhQUFBLEVBQ0FDLE1BQ0FDLE9BQUEsbUNBQ0FDLE1BQUFOLG1CQUFBTSxNQUNBeUMsTUFBQUEsRUFDQUMsT0FBQUEsRUFDQXhELFFBQUFBLEVBQ0EwRCxnQkFBQUEsR0FHQTNDLFFBQUEsU0FBQUgsR0FFQUEsRUFBQWdELGVBRUFELEVBQUFFLE9BQUFqRCxFQUFBZ0QsZUFDQVYsRUFBQWpELEtBQUEsY0FBQXdELElBSUE5RixFQUFBa0YseUJBQUFLLEdBSUFZLFNBQUFSLEdBQ0FBLEVBQUExQyxJQUtBVyxNQUFBLFNBQUFYLFFBT0F5QyxnQkFBQSxTQUFBSCxFQUFBSSxHQUVBLEdBQUFDLEdBQUF6QixTQUFBb0IsRUFBQWpELEtBQUEsZUFDQXVELEVBQUExQixTQUFBb0IsRUFBQWpELEtBQUEsZ0JBQ0F3RCxFQUFBRixFQUFBQyxFQUNBeEQsRUFBQWtELEVBQUFqRCxLQUFBLGVBRUF4QyxHQUFBNkMsTUFDQUosS0FBQSxNQUNBSyxJQUFBQyxtQkFBQUMsU0FDQTdDLE9BQUEsRUFDQThDLFNBQUEsUUFDQUMsYUFBQSxFQUNBQyxNQUNBQyxPQUFBLGdDQUNBQyxNQUFBTixtQkFBQU0sTUFDQXlDLE1BQUFBLEVBQ0FDLE9BQUFBLEVBQ0F4RCxRQUFBQSxHQUdBZSxRQUFBLFNBQUFILEdBRUFBLEVBQUFtRCxZQUVBcEcsRUFBQUUsSUFBQVMsZ0JBQUEwRixPQUFBcEQsRUFBQW1ELFlBQ0FiLEVBQUFqRCxLQUFBLGNBQUF3RCxJQUlBOUYsRUFBQWtGLHlCQUFBSyxHQUlBWSxTQUFBUixHQUNBQSxFQUFBMUMsSUFLQVcsTUFBQSxTQUFBWCxRQU9BcEIsbUJBQUEsV0FFQTdCLEVBQUFzRyxhQUFBdEcsRUFBQUUsSUFBQVEsY0FBQVYsRUFBQUcsS0FBQWUsZ0JBSUFvRixhQUFBLFNBQUFDLEVBQUFyRixHQUVBcUYsRUFBQUMsS0FBQSxXQUVBMUcsRUFBQXNDLE1BQUF5RCxTQUFBWSxJQUFBM0csRUFBQTRHLFFBQUFDLFlBQUE3RyxFQUFBNEcsUUFBQUUsU0FBQTFGLEdBQ0FwQixFQUFBc0MsTUFBQW5CLEtBQUEsK0RBQUE0RixLQUFBQyxRQUFBLElBQUFwRSxTQUFBMUMsRUFBQUcsS0FBQWdCLG9CQU9BNEYsYUFBQSxTQUFBUixFQUFBckYsR0FFQXFGLEVBQUFDLEtBQUEsV0FFQTFHLEVBQUFzQyxNQUFBeUQsU0FBQVksS0FBQTNHLEVBQUE0RyxRQUFBQyxZQUFBN0csRUFBQTRHLFFBQUFFLFNBQUExRixHQUFBcEIsRUFBQXNDLE1BQUFuQixLQUFBLCtCQUFBd0IsU0FBQXpDLEVBQUFHLEtBQUFnQixrQkFDQXJCLEVBQUFzQyxNQUFBbkIsS0FBQSwrREFDQXNDLFlBQUF2RCxFQUFBRyxLQUFBZ0IsaUJBQ0E2RixTQUFBRixRQUFBLE9BT0E3RSxvQkFBQSxXQUVBeUUsT0FBQU8sc0JBTUFQLE9BQUFPLHNCQUFBLFdBQUFqSCxFQUFBK0csYUFBQS9HLEVBQUFFLElBQUFRLGNBQUFWLEVBQUFHLEtBQUFlLGlCQUpBZ0csV0FBQSxXQUFBbEgsRUFBQStHLGFBQUEvRyxFQUFBRSxJQUFBUSxjQUFBVixFQUFBRyxLQUFBZSxnQkFBQSxNQVVBWSxZQUFBLFdBRUE5QixFQUFBRSxJQUFBRSxjQUFBOEIsR0FBQSxRQUFBbEMsRUFBQUcsS0FBQWtCLDBCQUFBLFdBRUEsR0FBQWMsR0FBQXJDLEVBQUFzQyxNQUNBK0UsRUFBQWhGLEVBQUFrQixNQUVBbEIsR0FDQUcsS0FBQSxtQkFBQTZFLEdBQ0FkLE9BQUFyRyxFQUFBRSxJQUFBWSxnQkFJQWQsRUFBQUUsSUFBQUUsY0FBQThCLEdBQUEsZ0JBQUEsU0FBQWtGLEVBQUFDLEVBQUFDLEVBQUFuRixHQUVBLEdBQUFvRixHQUFBcEYsRUFBQTJCLFFBQUEsc0NBQ0FxRCxFQUFBaEYsRUFBQUcsS0FBQSxtQkFFQWlGLEdBQUF0RCxPQUFBLElBRUE5QixFQUNBZ0QsS0FBQWdDLEdBQ0FkLE9BQUFyRyxFQUFBRSxJQUFBVyxXQUVBcUcsV0FBQSxXQUVBL0UsRUFBQWdELEtBQUFnQyxJQUVBLFNBUUFwRixZQUFBLFdBRUEvQixFQUFBRSxJQUFBRSxjQUFBb0gsWUFFQSxXQUVBLEdBQUFDLEdBQUEzSCxFQUFBc0MsS0FFQXFGLEdBQUEvRSxTQUFBMUMsRUFBQUcsS0FBQW9CLG1CQUlBLFdBRUEsR0FBQWtHLEdBQUEzSCxFQUFBc0MsS0FFQXFGLEdBQUFsRSxZQUFBdkQsRUFBQUcsS0FBQW9CLG1CQUlBdkIsRUFBQUcsS0FBQW1CLHdCQU9BeEIsR0FBQUMsR0FBQTJILE1BQUExSCxFQUFBd0IsWUFFQTFCLEVBQUE0RyxRQUFBeEUsR0FBQSxTQUFBLFdBQ0FsQyxFQUFBZ0MsZUFHQTJGLE9BQUE1SCIsImZpbGUiOiJtYWluLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigkLCBkb2N1bWVudCkge1xuICAgIFxuICAgIHZhciBqY2tfd29vc29jaWFsID0ge1xuICAgICAgICBcbiAgICAgICAgY2FjaGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgamNrX3dvb3NvY2lhbC5lbHMgPSB7fTtcbiAgICAgICAgICAgIGpja193b29zb2NpYWwudmFycyA9IHt9O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBqY2tfd29vc29jaWFsLmVscy5kb2N1bWVudF9ib2R5ID0gJChkb2N1bWVudC5ib2R5KTtcbiAgICAgICAgICAgIGpja193b29zb2NpYWwuZWxzLmFjdGlvbnNfbGlzdCA9ICQoJy5qY2std29vc29jaWFsLWFjdGlvbnMnKTtcbiAgICAgICAgICAgIGpja193b29zb2NpYWwuZWxzLnRhYl9saW5rcyA9ICQoJy5qY2std29vc29jaWFsLXByb2ZpbGUtbGluaycpO1xuICAgICAgICAgICAgamNrX3dvb3NvY2lhbC5lbHMudGFiX2NvbnRlbnQgPSAkKCcuamNrLXdvb3NvY2lhbC10YWItY29udGVudCcpO1xuICAgICAgICAgICAgamNrX3dvb3NvY2lhbC5lbHMubG9hZF9tb3JlX2J1dHRvbiA9ICQoJy5qY2std29vc29jaWFsLWxvYWQtbW9yZScpO1xuICAgICAgICAgICAgamNrX3dvb3NvY2lhbC5lbHMuYWN0aW9uX2Jsb2NrcyA9ICQoJy5qY2std29vc29jaWFsLWFjdGlvbicpOyAgICAgICAgICAgIFxuICAgICAgICAgICAgamNrX3dvb3NvY2lhbC5lbHMubGlrZXNfY29udGFpbmVyID0gJCgnLmpjay13b29zb2NpYWwtdXNlci1saWtlcycpO1xuICAgICAgICAgICAgamNrX3dvb3NvY2lhbC5lbHMuYWRkX3RvX2NhcnRfYnV0dG9ucyA9ICQoJy5qY2std29vc29jaWFsLWFkZC10by1jYXJ0LXdyYXBwZXIgLmFkZF90b19jYXJ0X2J1dHRvbicpO1xuICAgICAgICAgICAgamNrX3dvb3NvY2lhbC5lbHMudGlja19pY29uID0gJCgnPGkgY2xhc3M9XCJqY2std29vc29jaWFsLWljLXRpY2tcIj48L2k+Jyk7XG4gICAgICAgICAgICBqY2tfd29vc29jaWFsLmVscy5sb2FkaW5nX2ljb24gPSAkKCc8aSBjbGFzcz1cImpjay13b29zb2NpYWwtaWMtbG9hZGluZyBqY2std29vc29jaWFsLXNwaW5cIj48L2k+Jyk7XG4gICAgICAgICAgICBqY2tfd29vc29jaWFsLmVscy5jYXJkX2dyaWRzID0gJCgnLmpjay13b29zb2NpYWwtY2FyZC1ncmlkJyk7XG4gICAgICAgICAgICBqY2tfd29vc29jaWFsLmVscy5jYXJkX2dyaWRfY2FyZHMgPSBqY2tfd29vc29jaWFsLmVscy5jYXJkX2dyaWRzLmZpbmQoJy5qY2std29vc29jaWFsLWNhcmQnKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBqY2tfd29vc29jaWFsLnZhcnMuYWN0aW9uX29mZnNldCA9IDE7XG4gICAgICAgICAgICBqY2tfd29vc29jaWFsLnZhcnMuaXNfaGlkZGVuX2NsYXNzID0gXCJqY2std29vc29jaWFsLS1pcy1oaWRkZW5cIjtcbiAgICAgICAgICAgIGpja193b29zb2NpYWwudmFycy5hbmltYXRlX3NwaW5fY2xhc3MgPSBcImpjay13b29zb2NpYWwtc3BpblwiO1xuICAgICAgICAgICAgamNrX3dvb3NvY2lhbC52YXJzLmFkZF90b19jYXJ0X2J1dHRvbnNfY2xhc3MgPSAnLmpjay13b29zb2NpYWwtYWRkLXRvLWNhcnQtd3JhcHBlciAuYWRkX3RvX2NhcnRfYnV0dG9uJztcbiAgICAgICAgICAgIGpja193b29zb2NpYWwudmFycy5jYXJkX2dyaWRfY2FyZHNfY2xhc3MgPSAnLmpjay13b29zb2NpYWwtY2FyZC1ncmlkIC5qY2std29vc29jaWFsLWNhcmQnO1xuICAgICAgICAgICAgamNrX3dvb3NvY2lhbC52YXJzLmNhcmRfaG92ZXJfY2xhc3MgPSAnamNrLXdvb3NvY2lhbC1jYXJkLS1ob3Zlcic7XG4gICAgICAgICAgICBcbiAgICAgICAgfSxcbiBcbiAgICAgICAgb25fcmVhZHk6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBqY2tfd29vc29jaWFsLmNhY2hlKCk7XG4gICAgICAgICAgICBqY2tfd29vc29jaWFsLnNldHVwX2ZvbGxvd19hY3Rpb25zKCk7XG4gICAgICAgICAgICBqY2tfd29vc29jaWFsLnNldHVwX2xpa2VfYWN0aW9uKCk7XG4gICAgICAgICAgICBqY2tfd29vc29jaWFsLnNldHVwX3RhYnMoKTtcbiAgICAgICAgICAgIGpja193b29zb2NpYWwuc2V0dXBfbG9hZF9tb3JlKCk7XG4gICAgICAgICAgICBqY2tfd29vc29jaWFsLnNldHVwX2FjdGl2aXR5X2xvZygpO1xuICAgICAgICAgICAgamNrX3dvb3NvY2lhbC5hZGRfdG9fY2FydCgpO1xuICAgICAgICAgICAgamNrX3dvb3NvY2lhbC5zZXR1cF9jYXJkcygpO1xuICAgICAgICAgICAgXG4gICAgICAgIH0sXG4gICAgICAgIFxuICAgICAgICBvbl9zY3JvbGw6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBqY2tfd29vc29jaWFsLnNjcm9sbF9hY3Rpdml0eV9sb2coKTtcbiAgICAgICAgICAgIFxuICAgICAgICB9LFxuICAgICBcbiAgICAgICAgc2V0dXBfZm9sbG93X2FjdGlvbnM6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAkKCcuamNrLXdvb3NvY2lhbC1mb2xsb3ctYWN0aW9uJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB2YXIgJGJ1dHRvbiA9ICQodGhpcyksXG4gICAgICAgICAgICAgICAgICAgIHVzZXJfaWQgPSAkYnV0dG9uLmF0dHIoJ2RhdGEtdXNlci1pZCcpLFxuICAgICAgICAgICAgICAgICAgICB0eXBlID0gJGJ1dHRvbi5hdHRyKCdkYXRhLXR5cGUnKSxcbiAgICAgICAgICAgICAgICAgICAgbG9hZGluZ19jbGFzcyA9ICdqY2std29vc29jaWFsLWZvbGxvdy1hY3Rpb24tLWxvYWRpbmcnO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmKCB0eXBlID09PSBcImxvZ2luXCIgKSB7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGlmKCAhJGJ1dHRvbi5oYXNDbGFzcyhsb2FkaW5nX2NsYXNzKSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgJGJ1dHRvbi5hZGRDbGFzcyhsb2FkaW5nX2NsYXNzKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgXHRcdFx0XHR0eXBlOiAgICAgICAgXCJHRVRcIixcbiAgICAgICAgICAgIFx0XHRcdFx0dXJsOiAgICAgICAgIGpja193b29zb2NpYWxfdmFycy5hamF4X3VybCxcbiAgICAgICAgICAgIFx0XHRcdFx0Y2FjaGU6ICAgICAgIGZhbHNlLFxuICAgICAgICAgICAgXHRcdFx0XHRkYXRhVHlwZTogICAgXCJqc29ucFwiLFx0XHRcdFx0XG4gICAgICAgICAgICBcdFx0XHRcdGNyb3NzRG9tYWluOiB0cnVlLFxuICAgICAgICAgICAgXHRcdFx0XHRkYXRhOiB7XG4gICAgICAgICAgICBcdFx0XHRcdFx0YWN0aW9uOiAgJ2pja193b29zb2NpYWxfZm9sbG93X2FjdGlvbicsXG4gICAgICAgICAgICBcdFx0XHRcdFx0bm9uY2U6ICAgamNrX3dvb3NvY2lhbF92YXJzLm5vbmNlLFxuICAgICAgICAgICAgXHRcdFx0XHRcdHVzZXJfaWQ6IHVzZXJfaWQsXG4gICAgICAgICAgICBcdFx0XHRcdFx0dHlwZTogICAgdHlwZVxuICAgICAgICAgICAgXHRcdFx0XHR9LFxuICAgICAgICAgICAgXHRcdFx0XHRcbiAgICAgICAgICAgIFx0XHRcdFx0c3VjY2VzczogZnVuY3Rpb24oIGRhdGEgKSB7XG4gICAgICAgICAgICBcdFx0XHRcdFx0XG4gICAgICAgICAgICBcdFx0XHRcdFx0JGJ1dHRvbi50ZXh0KGRhdGEuYnV0dG9uLnRleHQpO1xuICAgICAgICAgICAgXHRcdFx0XHRcdCRidXR0b24uYXR0cignZGF0YS10eXBlJyxkYXRhLmJ1dHRvbi50eXBlKTtcbiAgICAgICAgICAgIFx0XHRcdFx0XHRcbiAgICAgICAgICAgIFx0XHRcdFx0XHQkYnV0dG9uLnJlbW92ZUNsYXNzKGxvYWRpbmdfY2xhc3MpO1xuICAgICAgICAgICAgXHRcdFx0XHRcdCRidXR0b24ucmVtb3ZlQ2xhc3MoJ2pjay13b29zb2NpYWwtZm9sbG93LWFjdGlvbi0tJyt0eXBlKTtcbiAgICAgICAgICAgIFx0XHRcdFx0XHQkYnV0dG9uLmFkZENsYXNzKCdqY2std29vc29jaWFsLWZvbGxvdy1hY3Rpb24tLScrZGF0YS5idXR0b24udHlwZSk7XG4gICAgICAgICAgICBcdFx0XHRcdFx0XG4gICAgICAgICAgICBcdFx0XHRcdFx0aWYoZGF0YS5hZGRfZm9sbG93X2h0bWwpIHtcbiAgICAgICAgICAgICAgICBcdFx0XHRcdFx0amNrX3dvb3NvY2lhbC5lbHMuYWN0aW9uc19saXN0LnByZXBlbmQoZGF0YS5hZGRfZm9sbG93X2h0bWwpO1xuICAgICAgICAgICAgXHRcdFx0XHRcdH1cbiAgICAgICAgICAgIFx0XHRcdFx0XHRcbiAgICAgICAgICAgIFx0XHRcdFx0XHRpZihkYXRhLnJlbW92ZV9mb2xsb3dfY2xhc3MpIHtcbiAgICAgICAgICAgICAgICBcdFx0XHRcdFx0JChkYXRhLnJlbW92ZV9mb2xsb3dfY2xhc3MpLnJlbW92ZSgpO1xuICAgICAgICAgICAgXHRcdFx0XHRcdH1cbiAgICAgICAgICAgIFx0XHRcdFx0fSxcbiAgICAgICAgICAgIFx0XHRcdFx0XG4gICAgICAgICAgICBcdFx0XHRcdGVycm9yOiBmdW5jdGlvbiggZGF0YSApIHtcbiAgICAgICAgICAgICAgICBcdFx0XHRcdFxuICAgICAgICAgICAgXHRcdFx0XHR9XG4gICAgICAgICAgICBcdFx0XHR9KTtcbiAgICAgICAgXHRcdFx0XG4gICAgICAgIFx0XHRcdH1cbiAgICBcdFx0XHRcbiAgICBcdFx0XHR9XG5cdFx0XHRcblx0XHRcdH0pO1xuICAgICAgICAgICAgXG4gICAgICAgIH0sXG4gICAgICAgIFxuICAgICAgICBzZXR1cF9saWtlX2FjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuamNrLXdvb3NvY2lhbC1saWtlLWFjdGlvbicsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdmFyICRidXR0b24gPSAkKHRoaXMpLFxuICAgICAgICAgICAgICAgICAgICAkY3VycmVudF9saWtlc19saXN0ID0gJGJ1dHRvbi5jbG9zZXN0KCcuamNrLXdvb3NvY2lhbC1saWtlcycpLFxuICAgICAgICAgICAgICAgICAgICBwcm9kdWN0X2lkID0gJGJ1dHRvbi5hdHRyKCdkYXRhLXByb2R1Y3QtaWQnKSxcbiAgICAgICAgICAgICAgICAgICAgdHlwZSA9ICRidXR0b24uYXR0cignZGF0YS10eXBlJyksXG4gICAgICAgICAgICAgICAgICAgICRjb3VudCA9ICRidXR0b24uZmluZCgnLmpjay13b29zb2NpYWwtbGlrZS1idXR0b25fX2NvdW50JyksXG4gICAgICAgICAgICAgICAgICAgIGxvYWRpbmdfY2xhc3MgPSAnamNrLXdvb3NvY2lhbC1mb2xsb3ctYWN0aW9uLS1sb2FkaW5nJztcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYoICEkYnV0dG9uLmhhc0NsYXNzKGxvYWRpbmdfY2xhc3MpICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICRidXR0b24uYWRkQ2xhc3MobG9hZGluZ19jbGFzcyk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICBcdFx0XHRcdHR5cGU6IFwiR0VUXCIsXG4gICAgICAgIFx0XHRcdFx0dXJsOiBqY2tfd29vc29jaWFsX3ZhcnMuYWpheF91cmwsXG4gICAgICAgIFx0XHRcdFx0Y2FjaGU6IGZhbHNlLFxuICAgICAgICBcdFx0XHRcdGRhdGFUeXBlOiBcImpzb25wXCIsXHRcdFx0XHRcbiAgICAgICAgXHRcdFx0XHRjcm9zc0RvbWFpbjogdHJ1ZSxcbiAgICAgICAgXHRcdFx0XHRkYXRhOiB7XG4gICAgICAgIFx0XHRcdFx0XHRhY3Rpb246ICdqY2tfd29vc29jaWFsX2xpa2VfYWN0aW9uJyxcbiAgICAgICAgXHRcdFx0XHRcdG5vbmNlOiBqY2tfd29vc29jaWFsX3ZhcnMubm9uY2UsXG4gICAgICAgIFx0XHRcdFx0XHRwcm9kdWN0X2lkOiBwcm9kdWN0X2lkLFxuICAgICAgICBcdFx0XHRcdFx0dHlwZTogdHlwZVxuICAgICAgICBcdFx0XHRcdH0sXG4gICAgICAgIFx0XHRcdFx0XG4gICAgICAgIFx0XHRcdFx0c3VjY2VzczogZnVuY3Rpb24oIGRhdGEgKSB7XG4gICAgICAgIFx0XHRcdFx0XHRcbiAgICAgICAgXHRcdFx0XHRcdGlmKCAkY291bnQubGVuZ3RoID4gMCApIHtcbiAgICAgICAgICAgIFx0XHRcdFx0XHRcbiAgICAgICAgICAgIFx0XHRcdFx0XHR2YXIgY291bnQgPSBwYXJzZUludCgkY291bnQudGV4dCgpKSxcbiAgICAgICAgICAgIFx0XHRcdFx0XHQgICAgbmV3X2NvdW50ID0gdHlwZSA9PT0gXCJsaWtlXCIgPyBjb3VudCsxIDogY291bnQtMTtcbiAgICAgICAgICAgIFx0XHRcdFx0XHRcbiAgICAgICAgICAgIFx0XHRcdFx0XHQkY291bnQudGV4dCggbmV3X2NvdW50ICk7IFxuICAgICAgICAgICAgXHRcdFx0XHRcdCRidXR0b24uYXR0cignZGF0YS10eXBlJywgZGF0YS5idXR0b24udHlwZSk7XG4gICAgICAgICAgICBcdFx0XHRcdFx0XG4gICAgICAgICAgICBcdFx0XHRcdFx0JGJ1dHRvbi5yZW1vdmVDbGFzcyhsb2FkaW5nX2NsYXNzKTtcbiAgICAgICAgICAgIFx0XHRcdFx0XHQkYnV0dG9uLnJlbW92ZUNsYXNzKCdqY2std29vc29jaWFsLWxpa2UtYWN0aW9uLS0nK3R5cGUpO1xuICAgICAgICAgICAgXHRcdFx0XHRcdCRidXR0b24uYWRkQ2xhc3MoJ2pjay13b29zb2NpYWwtbGlrZS1hY3Rpb24tLScrZGF0YS5idXR0b24udHlwZSk7XG4gICAgICAgICAgICBcdFx0XHRcdFx0XG4gICAgICAgICAgICBcdFx0XHRcdFx0aWYoZGF0YS5hZGRfbGlrZV9odG1sKSB7XG4gICAgICAgICAgICAgICAgXHRcdFx0XHRcdCRjdXJyZW50X2xpa2VzX2xpc3QuZmluZCgnLmpjay13b29zb2NpYWwtbGlrZXNfX2l0ZW0tLWxpa2UtYnV0dG9uJykuYWZ0ZXIoZGF0YS5hZGRfbGlrZV9odG1sKTtcbiAgICAgICAgICAgIFx0XHRcdFx0XHR9XG4gICAgICAgICAgICBcdFx0XHRcdFx0XG4gICAgICAgICAgICBcdFx0XHRcdFx0aWYoZGF0YS5yZW1vdmVfbGlrZV9jbGFzcykge1xuICAgICAgICAgICAgICAgIFx0XHRcdFx0XHQkY3VycmVudF9saWtlc19saXN0LmZpbmQoZGF0YS5yZW1vdmVfbGlrZV9jbGFzcykucmVtb3ZlKCk7XG4gICAgICAgICAgICBcdFx0XHRcdFx0fSAgICAgXHRcdFx0XHRcdFxuICAgICAgICAgICAgXHRcdFx0XHRcdFxuICAgICAgICBcdFx0XHRcdFx0fVxuICAgICAgICBcdFx0XHRcdH0sXG4gICAgICAgIFx0XHRcdFx0XG4gICAgICAgIFx0XHRcdFx0ZXJyb3I6IGZ1bmN0aW9uKCBkYXRhICkge1xuICAgICAgICAgICAgXHRcdFx0XHRcbiAgICAgICAgXHRcdFx0XHR9XG4gICAgICAgIFx0XHRcdH0pO1xuICAgICAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgfSxcbiAgICAgICAgXG4gICAgICAgIHNldHVwX3RhYnM6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBqY2tfd29vc29jaWFsLmVscy50YWJfbGlua3Mub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gJCh0aGlzKS5hdHRyKCdocmVmJyksXG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZV9jbGFzcyA9ICdqY2std29vc29jaWFsLXByb2ZpbGUtbGluay0tYWN0aXZlJztcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBqY2tfd29vc29jaWFsLmVscy50YWJfbGlua3MucmVtb3ZlQ2xhc3MoYWN0aXZlX2NsYXNzKTtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKGFjdGl2ZV9jbGFzcyk7XG4gICAgICAgICAgICAgICAgamNrX3dvb3NvY2lhbC5lbHMudGFiX2NvbnRlbnQuaGlkZSgpO1xuICAgICAgICAgICAgICAgICQodGFyZ2V0KS5zaG93KCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZXFqcy5yZWZyZXNoTm9kZXMoKTtcbiAgICAgICAgICAgICAgICBlcWpzLnF1ZXJ5KCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgfSxcbiAgICAgICAgXG4gICAgICAgIHNwaW5faWNvbl9zdGFydDogZnVuY3Rpb24oICRpY29uICl7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgICRpY29uLmFkZENsYXNzKCBqY2tfd29vc29jaWFsLnZhcnMuYW5pbWF0ZV9zcGluX2NsYXNzICk7XG4gICAgICAgICAgICBcbiAgICAgICAgfSxcbiAgICAgICAgXG4gICAgICAgIHNwaW5faWNvbl9zdG9wOiBmdW5jdGlvbiggJGljb24gKXtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgJGljb24ucmVtb3ZlQ2xhc3MoIGpja193b29zb2NpYWwudmFycy5hbmltYXRlX3NwaW5fY2xhc3MgKTtcbiAgICAgICAgICAgIFxuICAgICAgICB9LFxuICAgICAgICBcbiAgICAgICAgZGlzYWJsZV9sb2FkX21vcmVfYnV0dG9uOiBmdW5jdGlvbiggJGJ1dHRvbiApe1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAkYnV0dG9uXG4gICAgICAgICAgICAuaHRtbCggamNrX3dvb3NvY2lhbF92YXJzLnN0cmluZ3Mubm9fbW9yZSApXG4gICAgICAgICAgICAucmVtb3ZlQXR0cignaHJlZicpXG4gICAgICAgICAgICAuYWRkQ2xhc3MoXCJqY2std29vc29jaWFsLWxvYWQtbW9yZS0tZGlzYWJsZWRcIik7XG4gICAgICAgICAgICBcbiAgICAgICAgfSxcbiAgICAgICAgXG4gICAgICAgIHNldHVwX2xvYWRfbW9yZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGpja193b29zb2NpYWwuZWxzLmxvYWRfbW9yZV9idXR0b24ub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB2YXIgJGxvYWRfbW9yZV9idXR0b24gPSAkKHRoaXMpLFxuICAgICAgICAgICAgICAgICAgICAkbG9hZF9tb3JlX2ljb24gPSAkbG9hZF9tb3JlX2J1dHRvbi5maW5kKCdpJyk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmKCAkbG9hZF9tb3JlX2J1dHRvbi5oYXNDbGFzcyhcImpjay13b29zb2NpYWwtbG9hZC1tb3JlLS1kaXNhYmxlZFwiKSApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBqY2tfd29vc29jaWFsLnNwaW5faWNvbl9zdGFydCggJGxvYWRfbW9yZV9pY29uICk7XG4gICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiggJCh0aGlzKS5oYXNDbGFzcygnamNrLXdvb3NvY2lhbC1sb2FkLW1vcmUtLWFjdGl2aXR5JykgKSB7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBqY2tfd29vc29jaWFsLmxvYWRfbW9yZV9hY3Rpdml0eSggJCh0aGlzKSwgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgamNrX3dvb3NvY2lhbC5zcGluX2ljb25fc3RvcCggJGxvYWRfbW9yZV9pY29uICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmKCAkKHRoaXMpLmhhc0NsYXNzKCdqY2std29vc29jaWFsLWxvYWQtbW9yZS0tbGlrZXMnKSApIHtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGpja193b29zb2NpYWwubG9hZF9tb3JlX2xpa2VzKCAkKHRoaXMpLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBqY2tfd29vc29jaWFsLnNwaW5faWNvbl9zdG9wKCAkbG9hZF9tb3JlX2ljb24gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgIH0sXG4gICAgICAgIFxuICAgICAgICBsb2FkX21vcmVfYWN0aXZpdHk6IGZ1bmN0aW9uKCAkbG9hZF9tb3JlX2J1dHRvbiwgY2FsbGJhY2sgKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhciBsaW1pdCA9IHBhcnNlSW50KCAkbG9hZF9tb3JlX2J1dHRvbi5hdHRyKCdkYXRhLWxpbWl0JykgKSxcbiAgICAgICAgICAgICAgICBvZmZzZXQgPSBwYXJzZUludCggJGxvYWRfbW9yZV9idXR0b24uYXR0cignZGF0YS1vZmZzZXQnKSApLFxuICAgICAgICAgICAgICAgIG5leHRfb2Zmc2V0ID0gbGltaXQrb2Zmc2V0LFxuICAgICAgICAgICAgICAgIHVzZXJfaWQgPSAkbG9hZF9tb3JlX2J1dHRvbi5hdHRyKCdkYXRhLXVzZXItaWQnKSxcbiAgICAgICAgICAgICAgICBwcm9maWxlX3VzZXJfaWQgPSAkbG9hZF9tb3JlX2J1dHRvbi5hdHRyKCdkYXRhLXByb2ZpbGUtdXNlci1pZCcpLFxuICAgICAgICAgICAgICAgICRsb2FkX21vcmVfaXRlbSA9ICRsb2FkX21vcmVfYnV0dG9uLmNsb3Nlc3QoJ2xpJyk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAkLmFqYXgoe1xuXHRcdFx0XHR0eXBlOiAgICAgICAgXCJHRVRcIixcblx0XHRcdFx0dXJsOiAgICAgICAgIGpja193b29zb2NpYWxfdmFycy5hamF4X3VybCxcblx0XHRcdFx0Y2FjaGU6ICAgICAgIGZhbHNlLFxuXHRcdFx0XHRkYXRhVHlwZTogICAgXCJqc29ucFwiLFx0XHRcdFx0XG5cdFx0XHRcdGNyb3NzRG9tYWluOiB0cnVlLFxuXHRcdFx0XHRkYXRhOiB7XG5cdFx0XHRcdFx0YWN0aW9uOiAgICAgICAgICAnamNrX3dvb3NvY2lhbF9sb2FkX21vcmVfYWN0aXZpdHknLFxuXHRcdFx0XHRcdG5vbmNlOiAgICAgICAgICAgamNrX3dvb3NvY2lhbF92YXJzLm5vbmNlLFxuXHRcdFx0XHRcdGxpbWl0OiAgICAgICAgICAgbGltaXQsXG5cdFx0XHRcdFx0b2Zmc2V0OiAgICAgICAgICBvZmZzZXQsXG5cdFx0XHRcdFx0dXNlcl9pZDogICAgICAgICB1c2VyX2lkLFxuXHRcdFx0XHRcdHByb2ZpbGVfdXNlcl9pZDogcHJvZmlsZV91c2VyX2lkXG5cdFx0XHRcdH0sXG5cdFx0XHRcdFxuXHRcdFx0XHRzdWNjZXNzOiBmdW5jdGlvbiggZGF0YSApIHtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHRpZiggZGF0YS5hY3Rpdml0eV9odG1sICkge1xuICAgIFx0XHRcdFx0XHRcbiAgICBcdFx0XHRcdFx0JGxvYWRfbW9yZV9pdGVtLmJlZm9yZSggZGF0YS5hY3Rpdml0eV9odG1sICk7XG4gICAgXHRcdFx0XHRcdCRsb2FkX21vcmVfYnV0dG9uLmF0dHIoJ2RhdGEtb2Zmc2V0JywgbmV4dF9vZmZzZXQpIDtcbiAgICBcdFx0XHRcdFx0XG5cdFx0XHRcdFx0fSBlbHNlIHtcbiAgICBcdFx0XHRcdFx0XG4gICAgXHRcdFx0XHRcdGpja193b29zb2NpYWwuZGlzYWJsZV9sb2FkX21vcmVfYnV0dG9uKCAkbG9hZF9tb3JlX2J1dHRvbiApO1xuICAgIFx0XHRcdFx0XHRcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0aWYoY2FsbGJhY2sgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgXHRcdFx0Y2FsbGJhY2soZGF0YSk7XG4gICAgICAgICAgICBcdFx0fVxuXHRcdFx0XHRcdFxuXHRcdFx0XHR9LFxuXHRcdFx0XHRcblx0XHRcdFx0ZXJyb3I6IGZ1bmN0aW9uKCBkYXRhICkge1xuICAgIFx0XHRcdFx0XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuICAgICAgICAgICAgXG4gICAgICAgIH0sXG4gICAgICAgIFxuICAgICAgICBsb2FkX21vcmVfbGlrZXM6IGZ1bmN0aW9uKCAkbG9hZF9tb3JlX2J1dHRvbiwgY2FsbGJhY2sgKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhciBsaW1pdCA9IHBhcnNlSW50KCAkbG9hZF9tb3JlX2J1dHRvbi5hdHRyKCdkYXRhLWxpbWl0JykgKSxcbiAgICAgICAgICAgICAgICBvZmZzZXQgPSBwYXJzZUludCggJGxvYWRfbW9yZV9idXR0b24uYXR0cignZGF0YS1vZmZzZXQnKSApLFxuICAgICAgICAgICAgICAgIG5leHRfb2Zmc2V0ID0gbGltaXQrb2Zmc2V0LFxuICAgICAgICAgICAgICAgIHVzZXJfaWQgPSAkbG9hZF9tb3JlX2J1dHRvbi5hdHRyKCdkYXRhLXVzZXItaWQnKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICQuYWpheCh7XG5cdFx0XHRcdHR5cGU6ICAgICAgICBcIkdFVFwiLFxuXHRcdFx0XHR1cmw6ICAgICAgICAgamNrX3dvb3NvY2lhbF92YXJzLmFqYXhfdXJsLFxuXHRcdFx0XHRjYWNoZTogICAgICAgZmFsc2UsXG5cdFx0XHRcdGRhdGFUeXBlOiAgICBcImpzb25wXCIsXHRcdFx0XHRcblx0XHRcdFx0Y3Jvc3NEb21haW46IHRydWUsXG5cdFx0XHRcdGRhdGE6IHtcblx0XHRcdFx0XHRhY3Rpb246ICAnamNrX3dvb3NvY2lhbF9sb2FkX21vcmVfbGlrZXMnLFxuXHRcdFx0XHRcdG5vbmNlOiAgIGpja193b29zb2NpYWxfdmFycy5ub25jZSxcblx0XHRcdFx0XHRsaW1pdDogICBsaW1pdCxcblx0XHRcdFx0XHRvZmZzZXQ6ICBvZmZzZXQsXG5cdFx0XHRcdFx0dXNlcl9pZDogdXNlcl9pZFxuXHRcdFx0XHR9LFxuXHRcdFx0XHRcblx0XHRcdFx0c3VjY2VzczogZnVuY3Rpb24oIGRhdGEgKSB7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0aWYoIGRhdGEubGlrZXNfaHRtbCApIHtcbiAgICBcdFx0XHRcdFx0XG4gICAgXHRcdFx0XHRcdGpja193b29zb2NpYWwuZWxzLmxpa2VzX2NvbnRhaW5lci5hcHBlbmQoIGRhdGEubGlrZXNfaHRtbCApO1xuICAgIFx0XHRcdFx0XHQkbG9hZF9tb3JlX2J1dHRvbi5hdHRyKCdkYXRhLW9mZnNldCcsIG5leHRfb2Zmc2V0KSA7XG4gICAgXHRcdFx0XHRcdFxuXHRcdFx0XHRcdH0gZWxzZSB7XG4gICAgXHRcdFx0XHRcdFxuICAgIFx0XHRcdFx0XHRqY2tfd29vc29jaWFsLmRpc2FibGVfbG9hZF9tb3JlX2J1dHRvbiggJGxvYWRfbW9yZV9idXR0b24gKTtcbiAgICBcdFx0XHRcdFx0XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdGlmKGNhbGxiYWNrICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIFx0XHRcdGNhbGxiYWNrKGRhdGEpO1xuICAgICAgICAgICAgXHRcdH1cblx0XHRcdFx0XHRcblx0XHRcdFx0fSxcblx0XHRcdFx0XG5cdFx0XHRcdGVycm9yOiBmdW5jdGlvbiggZGF0YSApIHtcbiAgICBcdFx0XHRcdFxuXHRcdFx0XHR9XG5cdFx0XHR9KTtcbiAgICAgICAgICAgIFxuICAgICAgICB9LFxuICAgICAgICBcbiAgICAgICAgc2V0dXBfYWN0aXZpdHlfbG9nOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgamNrX3dvb3NvY2lhbC5oaWRlX2FjdGlvbnMoamNrX3dvb3NvY2lhbC5lbHMuYWN0aW9uX2Jsb2NrcywgamNrX3dvb3NvY2lhbC52YXJzLmFjdGlvbl9vZmZzZXQpO1xuICAgICAgICAgICAgXG4gICAgICAgIH0sXG4gICAgICAgIFxuICAgICAgICBoaWRlX2FjdGlvbnM6IGZ1bmN0aW9uKCRhY3Rpb25fYmxvY2tzLCBhY3Rpb25fb2Zmc2V0KSB7XG4gICAgXHRcdFxuICAgIFx0XHQkYWN0aW9uX2Jsb2Nrcy5lYWNoKGZ1bmN0aW9uKCl7XG4gICAgXHRcdFx0XG4gICAgXHRcdFx0aWYoICQodGhpcykub2Zmc2V0KCkudG9wID4gJCh3aW5kb3cpLnNjcm9sbFRvcCgpKyQod2luZG93KS5oZWlnaHQoKSphY3Rpb25fb2Zmc2V0ICkge1xuICAgICAgICBcdFx0XHQkKHRoaXMpLmZpbmQoJy5qY2std29vc29jaWFsLWFjdGlvbl9faWNvbiwgLmpjay13b29zb2NpYWwtYWN0aW9uX193cmFwcGVyJykuY3NzKHsgb3BhY2l0eTogMCB9KS5hZGRDbGFzcyhqY2tfd29vc29jaWFsLnZhcnMuaXNfaGlkZGVuX2NsYXNzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgXHRcdFx0XG4gICAgXHRcdH0pO1xuICAgIFx0XHRcbiAgICBcdH0sXG4gICAgXG4gICAgXHRzaG93X2FjdGlvbnM6IGZ1bmN0aW9uKCRhY3Rpb25fYmxvY2tzLCBhY3Rpb25fb2Zmc2V0KSB7XG4gICAgXHRcdFxuICAgIFx0XHQkYWN0aW9uX2Jsb2Nrcy5lYWNoKGZ1bmN0aW9uKCl7XG4gICAgXHRcdFx0XG4gICAgXHRcdFx0aWYoICQodGhpcykub2Zmc2V0KCkudG9wIDw9ICQod2luZG93KS5zY3JvbGxUb3AoKSskKHdpbmRvdykuaGVpZ2h0KCkqYWN0aW9uX29mZnNldCAmJiAkKHRoaXMpLmZpbmQoJy5qY2std29vc29jaWFsLWFjdGlvbl9faWNvbicpLmhhc0NsYXNzKGpja193b29zb2NpYWwudmFycy5pc19oaWRkZW5fY2xhc3MpICkge1xuICAgICAgICBcdFx0XHQkKHRoaXMpLmZpbmQoJy5qY2std29vc29jaWFsLWFjdGlvbl9faWNvbiwgLmpjay13b29zb2NpYWwtYWN0aW9uX193cmFwcGVyJylcbiAgICAgICAgXHRcdFx0ICAgIC5yZW1vdmVDbGFzcyhqY2tfd29vc29jaWFsLnZhcnMuaXNfaGlkZGVuX2NsYXNzKVxuICAgICAgICBcdFx0XHQgICAgLmFuaW1hdGUoeyBvcGFjaXR5OiAxIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICBcdFx0XHRcbiAgICBcdFx0fSk7XG4gICAgXHRcdFxuICAgIFx0fSxcbiAgICBcdFxuICAgIFx0c2Nyb2xsX2FjdGl2aXR5X2xvZzogZnVuY3Rpb24oKSB7XG4gICAgICAgIFx0XG4gICAgICAgIFx0aWYoIXdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUpIHtcbiAgICAgICAgICAgIFx0XG5cdFx0XHQgICAgc2V0VGltZW91dChmdW5jdGlvbigpeyBqY2tfd29vc29jaWFsLnNob3dfYWN0aW9ucyhqY2tfd29vc29jaWFsLmVscy5hY3Rpb25fYmxvY2tzLCBqY2tfd29vc29jaWFsLnZhcnMuYWN0aW9uX29mZnNldCk7IH0sIDEwMCk7XG4gICAgICAgICAgIFxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uKCl7IGpja193b29zb2NpYWwuc2hvd19hY3Rpb25zKGpja193b29zb2NpYWwuZWxzLmFjdGlvbl9ibG9ja3MsIGpja193b29zb2NpYWwudmFycy5hY3Rpb25fb2Zmc2V0KTsgfSk7ICBcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgIFx0fSxcbiAgICBcdFxuICAgIFx0YWRkX3RvX2NhcnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICBcdFxuICAgICAgICBcdGpja193b29zb2NpYWwuZWxzLmRvY3VtZW50X2JvZHkub24oJ2NsaWNrJywgamNrX3dvb3NvY2lhbC52YXJzLmFkZF90b19jYXJ0X2J1dHRvbnNfY2xhc3MsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBcdFxuICAgICAgICAgICAgXHR2YXIgJGJ1dHRvbiA9ICQodGhpcyksXG4gICAgICAgICAgICBcdCAgICBidXR0b25fdGV4dCA9ICRidXR0b24udGV4dCgpO1xuICAgICAgICAgICAgXHQgICAgXG4gICAgICAgICAgICAgICAgJGJ1dHRvblxuICAgICAgICAgICAgICAgIC5hdHRyKCdkYXRhLWJ1dHRvbi10ZXh0JyxidXR0b25fdGV4dClcbiAgICAgICAgICAgICAgICAuYXBwZW5kKCBqY2tfd29vc29jaWFsLmVscy5sb2FkaW5nX2ljb24gKTtcbiAgICAgICAgICAgIFx0XG4gICAgICAgIFx0fSk7XG4gICAgICAgIFx0XG4gICAgICAgIFx0amNrX3dvb3NvY2lhbC5lbHMuZG9jdW1lbnRfYm9keS5vbiggJ2FkZGVkX3RvX2NhcnQnLCBmdW5jdGlvbiggZSwgZnJhZ21lbnRzLCBjYXJ0X2hhc2gsICRidXR0b24gKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB2YXIgJHdvb3NvY2lhbF9idXR0b25fd3JhcHBlciA9ICRidXR0b24uY2xvc2VzdCgnLmpjay13b29zb2NpYWwtYWRkLXRvLWNhcnQtd3JhcHBlcicpLFxuICAgICAgICAgICAgICAgICAgICBidXR0b25fdGV4dCA9ICRidXR0b24uYXR0cignZGF0YS1idXR0b24tdGV4dCcpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmKCAkd29vc29jaWFsX2J1dHRvbl93cmFwcGVyLmxlbmd0aCA+IDAgKSB7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAkYnV0dG9uXG4gICAgICAgICAgICAgICAgICAgIC5odG1sKCBidXR0b25fdGV4dCApICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCBqY2tfd29vc29jaWFsLmVscy50aWNrX2ljb24gKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgJGJ1dHRvbi5odG1sKCBidXR0b25fdGV4dCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIH0sIDIwMDApO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBcdFxuICAgICAgICBcdH0pO1xuICAgICAgICBcdFxuICAgIFx0fSxcbiAgICBcdFxuICAgIFx0c2V0dXBfY2FyZHM6IGZ1bmN0aW9uKCkge1xuICAgICAgICBcdFxuICAgICAgICBcdGpja193b29zb2NpYWwuZWxzLmRvY3VtZW50X2JvZHkuaG92ZXJJbnRlbnQoIFxuICAgICAgICAgICAgXHRcbiAgICAgICAgXHQgICAgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIFx0ICAgIFxuICAgICAgICAgICAgXHQgICAgdmFyICRjYXJkID0gJCh0aGlzKTtcbiAgICAgICAgICAgIFx0ICAgIFxuICAgICAgICAgICAgXHQgICAgJGNhcmQuYWRkQ2xhc3MoIGpja193b29zb2NpYWwudmFycy5jYXJkX2hvdmVyX2NsYXNzICk7XG4gICAgICAgICAgICBcdCAgICBcbiAgICAgICAgXHQgICAgfSwgXG4gICAgICAgIFx0ICAgIFxuICAgICAgICBcdCAgICBmdW5jdGlvbigpe1xuICAgICAgICAgICAgXHQgICAgXG4gICAgICAgICAgICBcdCAgICB2YXIgJGNhcmQgPSAkKHRoaXMpO1xuICAgICAgICAgICAgXHQgICAgXG4gICAgICAgICAgICBcdCAgICAkY2FyZC5yZW1vdmVDbGFzcyggamNrX3dvb3NvY2lhbC52YXJzLmNhcmRfaG92ZXJfY2xhc3MgKTtcbiAgICAgICAgICAgIFx0ICAgIFxuICAgICAgICBcdCAgICB9LCBcbiAgICAgICAgXHQgICAgXG4gICAgICAgIFx0ICAgIGpja193b29zb2NpYWwudmFycy5jYXJkX2dyaWRfY2FyZHNfY2xhc3MgXG4gICAgICAgICAgICApO1xuICAgICAgICBcdFxuICAgIFx0fVxuICAgICBcbiAgICB9O1xuICAgIFxuXHQkKGRvY3VtZW50KS5yZWFkeSggamNrX3dvb3NvY2lhbC5vbl9yZWFkeSgpICk7XG5cdFxuXHQkKHdpbmRvdykub24oJ3Njcm9sbCcsIGZ1bmN0aW9uKCl7XG4gICAgXHRqY2tfd29vc29jaWFsLm9uX3Njcm9sbCgpO1xuICAgIH0pO1xuXG59KGpRdWVyeSwgZG9jdW1lbnQpKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=